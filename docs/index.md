---
marp: true
title: –ö–∞–∫ —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ InfluxDB
description: –ö–∞–∫ —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ InfluxDB —Å –ø–æ–º–æ—â—å—é InfluxQL Continuous Queries –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö 
theme: tdconf
template: bespoke
paginate: true
_paginate: false

---

<!-- _class: lead
-->

# –ö–∞–∫ —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ InfluxDB —Å –ø–æ–º–æ—â—å—é InfluxQL Continuous Queries –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## –°–º–∏—Ä–Ω–æ–≤ –í—è—á–µ—Å–ª–∞–≤

### ![h:35](themes/img/lead/miro.svg) Miro 

<!--

-->

---
<!-- _class: title -->

# –£—Å–∫–æ—Ä—è—é –∏ —Ç–µ—Å—Ç–∏—Ä—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤ ![h:35](themes/img/lead/miro.svg) Miro
## –†–∞–∑–≤–∏–≤–∞—é —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–∏–∫–æ–≤
### @qa_load

![bg cover](img/omsk.jpg)

<!-- 
–ü–æ–≤—ã—à–∞—é –∫–∞—á–µ—Å—Ç–≤–æ –±–æ–ª–µ–µ –¥–µ—Å—è—Ç–∏ –ª–µ—Ç. –ó–∞–Ω–∏–º–∞—é—Å—å —Å–∏—Å—Ç–µ–º–æ–π –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü. –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ñ–∏–ª—å –º–æ–µ–π —Ä–∞–±–æ—Ç—ã ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –†–∞–∑–≤–∏–≤–∞—é —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø–æ–º–æ–≥–∞—è –∫–æ–ª–ª–µ–≥–∞–º –≤ telegram —á–∞—Ç–µ ¬´QA ‚Äî Load & Performance¬ª.
-->

---
<!-- _class: main -->

# –û–± —É—Å–∫–æ—Ä–µ–Ω–∏–∏ __InfluxDB__ –≥–ª–∞–∑–∞–º–∏ –∏–Ω–∂–µ–Ω–µ—Ä–∞ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ 


---
# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1) ‚ÅâÔ∏è –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞
2) üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ __InfluxDB__
3) ‚öôÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –∏ —Å–µ—Ä–≤–µ—Ä—ã __InfluxDB__
3) ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ __InfluxDB__
3) ‚öôÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç __Grafana__ –∫ __InfluxDB__ —Å __NGINX__
3) ‚öôÔ∏è ¬´–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã __InfluxDB__ –≤ __Grafana__
3) üõ†Ô∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ —Ç–µ–≥–∞–º –≤ __Grafana__
3) üõ†Ô∏è –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ç–µ–≥–æ–≤ —Å –Ω–∏–∑–∫–æ–π —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏–∑ __InfluxDB__
4) ‚öôÔ∏è –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∏–∑ __JMeter__, __Gatling__, __Telegraf__, ...
5) üî¨ –ó–∞–º–µ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏–∑ __Grafana__ –≤ __InfluxDB__
5) üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–º–æ—â—å—é __Continuous Queries__
5) ‚ÄºÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ __Continuous Queries__
5) üõ†Ô∏è –ü–µ—Ä–µ—Ö–æ–¥ —Å __InfluxQL__ –Ω–∞ __Flux__
5) ‚öôÔ∏è –°–º–µ–Ω–∞ –ë–î __InfluxDB__ v1.8, __InfluxDB__ v2, __VictoriaMetrics__ –∏–ª–∏ __ClickHouse__


---

<!-- _class: main -->

# –ö–æ–≥–¥–∞ –∏ –¥–ª—è –∫–æ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞

---
# __1.__ ‚ÅâÔ∏è –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞

- –ë–æ–ª—å—à–æ–π –ø—Ä–æ–¥—É–∫—Ç, –∫–∞–∫ __Miro__

- –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å __k6__, __JMeter__, __Gatling__, __Yandex.Tank__, ...
- –•—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥—ã –∏ —Å—Ç—Ä–æ—è—Ç—Å—è —Ç—Ä–µ–Ω–¥—ã
- –ò –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å __InfluxDB__ OSS v1.8.10 –∏–ª–∏ __InfluxDB__ OSS v2.2.0
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫ –≤ __InfluxDB__ c __Telegraf__ v1.22.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∫–∏ –º–µ—Ç—Ä–∏–∫ c __InfluxDB__ –∏ __Grafana__ OSS v8.5.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≥–≥—Ä–µ–≥–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ c __Continuous Queries__

---

# –ë–æ–ª—å—à–æ–π –ø—Ä–æ–¥—É–∫—Ç, –∫–∞–∫ __Miro__

![bg cover](img/miro.png)

---

# –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

![bg height:75%](img/infra.team.png)

---

# –ú–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å __Yandex.Tank__, __k6__, __JMeter__, __Gatling__

![bg height:75%](img/infra.tools.png)

---

# –•—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥—ã –∏ —Å—Ç—Ä–æ—è—Ç—Å—è —Ç—Ä–µ–Ω–¥—ã

![bg 70%](img/trend.png)

---

# –í—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å __InfluxDB__ OSS v1.8 –∏–ª–∏ v2.2

![bg 100%](img/influxdb.versions.png)


---

# –ü–æ–º–µ–Ω—è–µ–º —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

![bg 60%](img/routine.png)

---
# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å –≤ __InfluxDB__ c __Telegraf__ –∏ __MQ__


![bg 90%](img/telegraf.for.write.png)


---
# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –≤—ã–±–æ—Ä–∫—É c __Grafana__ –∏ __nginx__

![bg 90%](img/grafana.optimisation.png)


---
# –í—ã—á–∏—Å–ª–∏–º –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

![bg 80%](img/Complex.query.png)

---
# –ò –∑–∞–∫–µ—à–∏—Ä—É–µ–º –∏—Ö —Å __Continuous Queries__

![bg 80%](img/Continuous.query.png)


---
<!-- _class: invert -->

# __1.__ ‚ÅâÔ∏è –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞

- –ë–æ–ª—å—à–æ–π –ø—Ä–æ–¥—É–∫—Ç, –∫–∞–∫ __Miro__

- –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å __k6__, __JMeter__, __Gatling__, __Yandex.Tank__, ...
- –•—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥—ã –∏ —Å—Ç—Ä–æ—è—Ç—Å—è —Ç—Ä–µ–Ω–¥—ã
- –ò –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å __InfluxDB__ OSS v1.8.10 –∏–ª–∏ __InfluxDB__ OSS v2.2.0
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫ –≤ __InfluxDB__ c __Telegraf__ v1.22.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∫–∏ –º–µ—Ç—Ä–∏–∫ c __InfluxDB__ –∏ __Grafana__ OSS v8.5.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≥–≥—Ä–µ–≥–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ c __Continuous Queries__



---

<!-- _class: main -->

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---
# __2.__ üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ __InfluxDB__

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—â–µ—Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ __InfluxDB__
  - –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –¥–ª—è __InfluxDB__ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ __InfluxDB__ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **__internal**
  - –†–∞–∑–º–µ—Ä—ã —à–∞—Ä–¥ __InfluxDB__
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ __InfluxDB__
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __InfluxDB__ (—Ç—è–∂–µ–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __Grafana__ (—Ç—è–∂–µ–ª—ã–µ –æ—Ç—á–µ—Ç—ã)

---
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—â–µ—Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

---
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ __InfluxDB__

---
# –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –¥–ª—è __InfluxDB__ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏

---
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ __InfluxDB__ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **__internal**

---
# –†–∞–∑–º–µ—Ä—ã —à–∞—Ä–¥ __InfluxDB__

---
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ __InfluxDB__

---
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __InfluxDB__ (—Ç—è–∂–µ–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã)

---
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __Grafana__ (—Ç—è–∂–µ–ª—ã–µ –æ—Ç—á–µ—Ç—ã)

---
# –ü—Ä–æ–µ–∫—Ç __influxdb-bench__ –Ω–∞ __github__, –≥–¥–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## `https://github.com/polarnik/influxdb-bench`

---
<!-- _class: invert -->
# __2.__ üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ __InfluxDB__

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—â–µ—Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ __InfluxDB__
  - –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –¥–ª—è __InfluxDB__ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫ __InfluxDB__ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **__internal**
  - –†–∞–∑–º–µ—Ä—ã —à–∞—Ä–¥ __InfluxDB__
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ __InfluxDB__
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __InfluxDB__ (—Ç—è–∂–µ–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ __Grafana__ (—Ç—è–∂–µ–ª—ã–µ –æ—Ç—á–µ—Ç—ã)


---

<!-- _class: main -->

# –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —É—Å–∫–æ—Ä–µ–Ω–∏—è ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã

---
# __3.__ ‚öôÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –∏ —Å–µ—Ä–≤–µ—Ä—ã __InfluxDB__

- __–†–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö__ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç–µ–Ω–¥–æ–≤

- __–†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã__ –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö 
- __–†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã__ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- __–ü–æ–ª—É—á–∞–µ–º__ —Å–∫–æ—Ä–æ—Å—Ç—å, __—Ç–µ—Ä—è–º__ –ø—Ä–æ—Å—Ç–æ—Ç—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º


---
# __–†–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö__ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç–µ–Ω–¥–æ–≤

![bg fit](img/big.db.png)



---
# __–†–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö__ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç–µ–Ω–¥–æ–≤

![bg fit brightness:0.4](img/big.db.png)


# __–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π –ë–î__:

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ–ª—å—à–∞—è
- –ù—É–∂–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö



---
# __–†–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö__ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç–µ–Ω–¥–æ–≤

![bg fit brightness:0.4](img/big.db.png)

# –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π –ë–î:

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±–æ–ª—å—à–∞—è
- –ù—É–∂–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

# __–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö –ë–î__:

- –ë–µ–∫–∞–ø—ã –ø—Ä–æ—â–µ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞
- –°–ª–æ–∂–Ω–µ–µ –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –ë–î

---
#  __–†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã__ –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö 

![bg fit](img/old.new.data.png)

---
# __–î–≤–∞ —Å–µ—Ä–≤–∏—Å–∞__ c –æ–¥–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –ë–î –±—ã—Å—Ç—Ä–µ–µ –æ–¥–Ω–æ–≥–æ
![bg fit](img/server.split.png)

---
# __–°–µ–º—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤__ –±—ã—Å—Ç—Ä–µ–µ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ?
![bg fit](img/docker.split.png)

---
# __–°–µ–º—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤__ –±—ã—Å—Ç—Ä–µ–µ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ?
![bg fit opacity:0.4](img/docker.split.png)

# –î–∞, __–±—ã—Å—Ç—Ä–µ–µ__, 
# –Ω–æ –µ—Å–ª–∏
# –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ
# –≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---
#  –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º –∏–∑ –æ–¥–Ω–æ–π –ë–î

![bg 90% ](img/big.db.2.png)

## –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
## –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤
## –ø–æ –≤—Å–µ–º –º–µ—Ç—Ä–∏–∫–∞–º
## —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –±–µ–∑ –Ω–∏—Ö

---
#  –°–∫—Ä–∏–ø—Ç—ã –∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è –æ–±—â–∏—Ö —Ç—Ä–µ–Ω–¥–æ–≤

## –í—Å–µ –µ—â–µ –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
## –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –Ω–æ–≤—ã–º
## –º–µ—Ç—Ä–∏–∫–∞–º –≤ –æ–¥–Ω–æ–π –ë–î.

# __–ù–æ, —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã__
## __–¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –≤—Å–µ–º__
## __–º–µ—Ç—Ä–∏–∫–∞–º –≤—Å–µ—Ö –ë–î.__

![bg 90% ](img/small.db.2.png)

---
<!-- _class: invert -->
# __3.__ ‚öôÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –∏ —Å–µ—Ä–≤–µ—Ä—ã __InfluxDB__

- __–†–∞–∑–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö__ –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å—Ç–µ–Ω–¥–æ–≤

- __–†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã__ –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö 
- __–†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã__ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- __–ü–æ–ª—É—á–∞–µ–º__ —Å–∫–æ—Ä–æ—Å—Ç—å, __—Ç–µ—Ä—è–º__ –ø—Ä–æ—Å—Ç–æ—Ç—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º

---
# __4.__ ‚öôÔ∏è ¬´–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã __InfluxDB__ –≤ __Grafana__

- __Grafana__ –∫–∞–∫ —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ __{name}-{from}-{to}__
- –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö __{name}-{from}-{to}__ –Ω–∞ –∞—Ä—Ö–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö __{name}-{from}__
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ __Grafana DataSource__ —Å –∏–º–µ–Ω–µ–º __{name}__ –Ω–∞ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ __Grafana DataSource__ –¥–ª—è –∞—Ä—Ö–∏–≤–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---
<!-- _class: invert -->
# __4.__ ‚öôÔ∏è ¬´–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã __InfluxDB__ –≤ __Grafana__

- __Grafana__ –∫–∞–∫ —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ __{name}-{from}-{to}__
- –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö __{name}-{from}-{to}__ –Ω–∞ –∞—Ä—Ö–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö __{name}-{from}__
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ __Grafana DataSource__ —Å –∏–º–µ–Ω–µ–º __{name}__ –Ω–∞ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ __Grafana DataSource__ –¥–ª—è –∞—Ä—Ö–∏–≤–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

<!-- _class: main -->

# –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ __InfluxDB__ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –º–µ—Ç—Ä–∏–∫

---
# –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å

# üêå ü§î

![bg 90%](img/wo.telegraf.png)

---
# –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –∑–∞–ø–∏—Å—å –≤ __InfluxDB__ c __Telegraf__ –∏ __MQ__

# üöÄ üòÄ 

![bg 90%](img/telegraf.for.write.png)


---
# __5.__ ‚öôÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ __JMeter__, __Gatling__, __Telegraf__, ...

- __Batch, batch, batch...__ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä batch-–∞ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ

- –ó–∞–º–µ–Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤ __1 —Å–µ–∫—É–Ω–¥—É__ –Ω–∞ __1 –º–∏–Ω—É—Ç—É__ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª—å—à–µ __5 –º–∏–Ω—É—Ç__

- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç—É: __–ø—Ä–æ–±–ª–µ–º–∞ –∫–≤–∞–Ω—Ç–∏–ª–µ–π__

- –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ __summary__

- __SLA__ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ % –æ—à–∏–±–æ–∫, –∞ __Assertion__ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ç–µ—Å—Ç

- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –º–æ–∂–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞

---

<!-- _class: invert  -->

# __5.__ ‚öôÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ __JMeter__, __Gatling__, __Telegraf__, ...

- __Batch, batch, batch...__ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä batch-–∞ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ

- –ó–∞–º–µ–Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤ __1 —Å–µ–∫—É–Ω–¥—É__ –Ω–∞ __1 –º–∏–Ω—É—Ç—É__ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª—å—à–µ __5 –º–∏–Ω—É—Ç__

- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–µ—Å—Ç—É: __–ø—Ä–æ–±–ª–µ–º–∞ –∫–≤–∞–Ω—Ç–∏–ª–µ–π__

- –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ __summary__

- __SLA__ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ % –æ—à–∏–±–æ–∫, –∞ __Assertion__ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ç–µ—Å—Ç

- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –º–æ–∂–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞


---

<!-- _class: main -->

# –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∫–∏ –∏–∑ __InfluxDB__ —á–µ—Ä–µ–∑ __Grafana__ —Å __nginx__

---
# __5.__ ‚öôÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç __Grafana__ –∫ __InfluxDB__ —Å __NGINX__

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ __GET__-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ __NGINX__ (–Ω—É–∂–Ω–æ)

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ __POST__-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ __NGINX__ (–Ω–µ –Ω—É–∂–Ω–æ)
- –í–ª–∏—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ __Grafana__ –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–º–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤–∏–¥–∞ __`now()-6h...now()`__ —Å—Ç–∞—Ç–∏—Ç–∏—á–µ—Å–∫–∏–º

---

![bg 90%](img/grafana.optimisation.png)

---

![bg 90%](img/nginx_boost.png)

---

# __InfluxDB__ endpoints: –∫–µ—à–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å—ã

- __`https://docs.influxdata.com/influxdb/v1.8/tools/api/`__
- /debug/pprof (GET)
- /debug/requests (GET)
- /debug/vars (GET)
- /ping (GET, HEAD)
- __/query (GET, POST)__ ‚ÄºÔ∏è
- /write (POST)
- /metrics (GET)
- /api/v2/query (POST)
- /api/v2/write (POST)
- /health (GET)

---

# __InfluxDB__ endpoint __/query__ (GET, POST)

- GET:
  - __SELECT__ ‚ÄºÔ∏è
  - __SHOW__ ‚ÄºÔ∏è

- POST:
  - SELECT INTO
  - ALTER
  - CREATE
  - DELETE
  - DROP
  - GRANT
  - KILL
  - REVOKE

---

# –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ InfluxDB

```bash
curl -G 'http://influxdb:8086/query?db=mydb' --data-urlencode \
  'q=SELECT * FROM "metrics"'
```

```
http://influxdb:8086/query?db=mydb
&q=SELECT+%2A+FROM+%22metrics%22
```

```bash
curl -G 'http://influxdb:8086/query?db=mydb' --data-urlencode \
  'q=SELECT * FROM "metrics" \
  where time>1655292146382 AND time<1655293218949'
```

```
http://influxdb:8086/query?db=mydb
&q=SELECT+%2A+FROM+%22metrics%22+%5C%0A
+where+time%3E1655292146382+AND+time%3C165529321894
```

---
<!-- _class: invert -->
# __5.__ ‚öôÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç __Grafana__ –∫ __InfluxDB__ —Å __NGINX__

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ __GET__-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ __NGINX__

- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ __POST__-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ __NGINX__
- –í–ª–∏—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ __Grafana__ –Ω–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–º–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –≤–∏–¥–∞ __`now()-6h...now()`__ —Å—Ç–∞—Ç–∏—Ç–∏—á–µ—Å–∫–∏–º

---

<!-- _class: main -->

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤ __InfluxDB__


---
# __6.__ ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ __InfluxDB__

- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-concurrent-queries`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max_conns`__ –≤ __nginx__ upstream
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`query-timeout`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`fail_timeout`__ –≤ __nginx__ upstream
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-series`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`Max series`__ –≤ __Grafana__ DataSource
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-buckets`__
- –û–≥—Ä–∞—á–∏–Ω–∏–≤–∞–µ–º __`max-select-point`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __Min time interval__ –≤ __Grafana__ DataSource
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __Max data points__ –≤ __Grafana__ Query options
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞ —Å __`memory`__ –Ω–∞ __`tsi1`__
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ c __`log-queries-after`__


---


# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ __`[coordinator]`__

---

# –û—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

**_![  ](img/influxdb.requests.png)_**

---

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __max-concurrent-queries__

```yaml
[coordinator]
  # The maximum number of concurrent queries 
  # allowed to be executing at one time.  
  # If a query is executed and exceeds this limit, 
  # an error is returned to the caller.  
  # This limit can be disabled by setting it to 0.
  max-concurrent-queries = 5
```

---
<!-- _class: error -->

# –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ __max-concurrent-queries__

**_![  ](img/max-concurrent-queries.error.png)_**


---
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __max_conns__ –≤ __nginx__ upstream

---

# –û—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤

**_![  ](img/query-timeout.png)_**

---

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __query-timeout__

```yaml
[coordinator]
  # The maximum time a query will is allowed 
  # to execute before being killed by the system.  
  # This limit can help prevent run away queries.  
  # Setting the value to 0 disables the limit.
  query-timeout = "90s"
```

---

<!-- _class: error
-->

# –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ __query-timeout__

**_![  ](img/query-timeout.error.png)_**


---

# –û—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤ –æ—Ç–≤–µ—Ç–∞

**_![  ](img/influxdb.series.png)_**


---

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-series`__

```yaml
[coordinator]
  # The maximum number of series a SELECT can run. 
  # A value of 0 will make the maximum series
  # count unlimited.
  
  # max-select-series = 0
  max-select-series = 1000
```

---

<!-- _class: error
-->

# –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ __`max-select-series`__

**_![  ](img/max-select-series.error.png)_**

---

# –û—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–µ–¥–µ–ª –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**_![  ](img/influxdb.series.png)_**

---

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-buckets`__

```yaml
[coordinator]
  # The maxium number of group by 
  # time bucket a SELECT can create.
  # A value of zero will max the maximum 
  # number of buckets unlimited.
  
  # max-select-buckets = 0
  max-select-buckets = 1900
```
---

<!-- _class: error
-->

# –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ __`max-select-buckets`__

**_![  ](img/max-select-buckets.error.png)_**

---

# –û—Ü–µ–Ω–∏–≤–∞–µ–º –ø—Ä–µ–¥–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –æ—Ç–≤–µ—Ç–∞

**_![  ](img/influxdb.requests.png)_**

–ü—Ä–µ–¥–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

```
–ì—Ä—É–ø–ø—ã –ø–æ —Ç–µ–≥–∞–º x 
–ì—Ä—É–ø–ø—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ x
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π
```

---

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –æ—Ç–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞

**_![  ](img/influxdb.requests.png)_**

---

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –æ—Ç–≤–µ—Ç–∞ –∏ –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫

**_![  ](img/influxdb.requests.png)_**


---

# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-point`__

```yaml
[coordinator]
  # The maximum number of points a SELECT can process.  
  # A value of 0 will make the maximum point count unlimited.  
  # This will only be checked every second so queries will not
  # be aborted immediately when hitting the limit.
  
  # max-select-point = 0
  max-select-point = 20000
```

---

<!-- _class: error
-->

# –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ __`max-select-point`__

**_![  ](img/max-select-point.error.png)_**


---
# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞ —Å __`memory`__ –Ω–∞ __`tsi1`__

---

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ c __`log-queries-after`__

```yaml
[coordinator]
  # The time threshold when a query will be 
  # logged as a slow query.  
  # This limit can be set to help
  # discover slow or resource intensive queries.  
  # Setting the value to 0 disables the slow query logging.
  log-queries-after = "5s"
```

---
<!-- _class: invert -->
# __6.__ ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ __InfluxDB__

- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-concurrent-queries`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max_conns`__ –≤ __nginx__ upstream
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`query-timeout`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`fail_timeout`__ –≤ __nginx__ upstream
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-series`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`Max series`__ –≤ __Grafana__ DataSource
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __`max-select-buckets`__
- –û–≥—Ä–∞—á–∏–Ω–∏–≤–∞–µ–º __`max-select-point`__
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __Min time interval__ –≤ __Grafana__ DataSource
  - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º __Max data points__ –≤ __Grafana__ Query options
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞ —Å __`memory`__ –Ω–∞ __`tsi1`__
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ c __`log-queries-after`__





---
# __7.__ üõ†Ô∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ —Ç–µ–≥–∞–º –≤ __Grafana__

---
# __8.__ üõ†Ô∏è –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ç–µ–≥–æ–≤ —Å –Ω–∏–∑–∫–æ–π —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏–∑ __InfluxDB__


---
# __10.__ üî¨ –ó–∞–º–µ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏–∑ __Grafana__ –≤ __InfluxDB__

---
# __11.__ üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–º–æ—â—å—é __Continuous Queries__

---
# __12.__ ‚ÄºÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ __Continuous Queries__

---
# __13.__ üõ†Ô∏è –ü–µ—Ä–µ—Ö–æ–¥ —Å __InfluxQL__ –Ω–∞ __Flux__

---
# __14.__ ‚öôÔ∏è –°–º–µ–Ω–∞ –ë–î __InfluxDB__ v1.8, __InfluxDB__ v2, __VictoriaMetrics__ –∏–ª–∏ __ClickHouse__

---
<!-- _class: invert -->
# __1.__ ‚ÅâÔ∏è –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞

- –ë–æ–ª—å—à–æ–π –ø—Ä–æ–¥—É–∫—Ç, –∫–∞–∫ __Miro__

- –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å __k6__, __JMeter__, __Gatling__, __Yandex.Tank__, ...
- –•—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥—ã –∏ —Å—Ç—Ä–æ—è—Ç—Å—è —Ç—Ä–µ–Ω–¥—ã
- –ò –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–∫–æ—Ä–∏—Ç—å __InfluxDB__ OSS v1.8.10 –∏–ª–∏ __InfluxDB__ OSS v2.2.0
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫ –≤ __InfluxDB__ c __Telegraf__ v1.22.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∫–∏ –º–µ—Ç—Ä–∏–∫ c __InfluxDB__ –∏ __Grafana__ OSS v8.5.4
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≥–≥—Ä–µ–≥–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ c __Continuous Queries__

---
<!-- class: invert -->

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1) ‚ÅâÔ∏è –ö–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è __InfluxDB__ –≤–∞–∂–Ω–∞
2) üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ __InfluxDB__
3) ‚öôÔ∏è –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã–µ –±–∞–∑—ã –∏ —Å–µ—Ä–≤–µ—Ä—ã __InfluxDB__
3) ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ __InfluxDB__
3) ‚öôÔ∏è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç __Grafana__ –∫ __InfluxDB__ —Å __NGINX__
3) ‚öôÔ∏è ¬´–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –º–µ–¥–ª–µ–Ω–Ω–æ–π –±–∞–∑—ã __InfluxDB__ –≤ __Grafana__
3) üõ†Ô∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ —Ç–µ–≥–∞–º –≤ __Grafana__
3) üõ†Ô∏è –£–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ç–µ–≥–æ–≤ —Å –Ω–∏–∑–∫–æ–π —Å–µ–ª–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏–∑ __InfluxDB__
4) ‚öôÔ∏è –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∏–∑ __JMeter__, __Gatling__, __Telegraf__, ...
5) üî¨ –ó–∞–º–µ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏–∑ __Grafana__ –≤ __InfluxDB__
5) üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —Å –ø–æ–º–æ—â—å—é __Continuous Queries__
5) ‚ÄºÔ∏è –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ __Continuous Queries__
5) üõ†Ô∏è –ü–µ—Ä–µ—Ö–æ–¥ —Å __InfluxQL__ –Ω–∞ __Flux__
5) ‚öôÔ∏è –°–º–µ–Ω–∞ –ë–î __InfluxDB__ v1.8, __InfluxDB__ v2, __VictoriaMetrics__ –∏–ª–∏ __ClickHouse__

---
<!-- _class: main
-->

# –ò—Ç–æ–≥–∏


---

<!-- _class: lead12
_footer: 'C—Å—ã–ª–∫–∞ –Ω–∞ [—Å–ª–∞–π–¥—ã](https://polarnik.github.io/influxdb-bench/), —Å—Å—ã–ª–∫–∞ [–Ω–∞ –±–µ–Ω—á–º–∞—Ä–∫](https://github.com/polarnik/influxdb-bench)'
-->

# –í–æ–ø—Ä–æ—Å—ã/–æ—Ç–≤–µ—Ç—ã

# –ö–∞–∫ —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ InfluxDB

## –°–º–∏—Ä–Ω–æ–≤ –í—è—á–µ—Å–ª–∞–≤

### @qa_load



